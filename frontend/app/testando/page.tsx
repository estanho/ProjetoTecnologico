'use client';

import {
  GoogleMap,
  Libraries,
  LoadScript,
  Marker,
} from '@react-google-maps/api';
import { useEffect, useState } from 'react';

import { useSpring } from '@react-spring/web';

const libraries = [
  'drawing',
  'geometry',
  'localContext',
  'places',
  'visualization',
];

type Position = {
  lat: number;
  lng: number;
};

const positions: Position[] = [
  { lat: -27.593066, lng: -48.549793 },
  { lat: -27.592933, lng: -48.55106 },
  { lat: -27.592864, lng: -48.55197 },
  { lat: -27.593375, lng: -48.551891 },
  { lat: -27.593758, lng: -48.551762 },
  { lat: -27.593752, lng: -48.551125 },
  { lat: -27.593749, lng: -48.550606 },
  { lat: -27.59375, lng: -48.550152 },
  { lat: -27.594069, lng: -48.550223 },
  { lat: -27.594522, lng: -48.550324 },
];

const center = {
  lat: positions[0].lat,
  lng: positions[0].lng,
};

{
  // Car
  /* <svg width="44" height="86" viewBox="0 0 44 86" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M0.541858 50.5905C0.541976 50.5975 0.545397 50.6198 0.545768 50.6374C0.549557 50.8088 0.564222 51.4182 0.639515 51.7507C0.723702 52.1224 0.838251 52.494 1.03405 52.821C1.32695 53.3102 1.74526 53.7227 2.17077 54.1023C2.52588 54.419 2.94102 54.6613 3.33873 54.9226C3.49862 55.0276 3.6481 55.1631 3.83093 55.2194C3.85614 55.2272 3.87873 55.2376 3.90515 55.2429C3.92237 61.3477 3.96572 67.4525 4.10436 73.5554C4.22683 77.2199 6.06772 80.8146 9.17858 82.821C10.1814 83.6807 11.3657 84.23 12.6473 84.4773C16.5053 85.9065 20.7105 85.2958 24.7372 85.4265C27.9482 85.5478 31.1775 84.8735 34.034 83.4187C36.7 81.7272 39.0783 79.1986 39.5614 75.9655C40.5031 71.4361 39.9684 66.771 40.1239 62.1804C40.1188 59.8651 40.1203 57.5504 40.12 55.2351C40.1365 55.2311 40.1509 55.2244 40.1669 55.2194C40.3497 55.1631 40.4992 55.0276 40.659 54.9226C41.0568 54.6613 41.4719 54.419 41.827 54.1023C42.2525 53.7227 42.6708 53.3102 42.9637 52.821C43.1595 52.494 43.2741 52.1225 43.3583 51.7507C43.4336 51.4182 43.4482 50.8088 43.452 50.6374C43.4679 50.5602 43.4541 50.4773 43.413 50.4226C43.3718 50.3679 43.3312 50.3506 43.2372 50.3366C43.1432 50.3227 43.1025 50.3367 42.8661 50.3991C42.6296 50.4615 42.2177 50.6105 41.8426 50.7702C41.4676 50.93 40.9527 51.1952 40.6278 51.3718C40.42 51.4847 40.263 51.5765 40.12 51.6648C40.1214 48.6527 40.1214 45.6416 40.1239 42.6296C40.1378 42.619 40.1527 42.6078 40.1669 42.5944C40.2401 42.525 40.3372 42.424 40.4051 42.2312C40.4731 42.0384 40.454 42.0287 40.4833 41.4421C40.5125 40.8555 40.5022 39.3695 40.4755 38.9343C40.4487 38.4991 40.4419 38.4216 40.3583 38.2077C40.2907 38.035 40.2582 37.9061 40.1278 37.8796C40.129 33.2906 40.1237 28.6989 40.1044 24.1101C40.1616 23.9414 40.1468 23.9033 40.1747 23.3444C40.2039 22.7579 40.1936 21.2679 40.1669 20.8327C40.1448 20.4738 40.1343 20.357 40.0848 20.2077C40.0611 16.4163 40.0252 12.6239 39.9715 8.83272C39.9778 6.18152 38.3252 3.54688 35.7762 2.65694C30.1688 0.38396 23.9518 0.424831 17.995 0.656931C14.1056 0.953806 10.0136 1.45562 6.65514 3.56318C3.98025 5.45154 3.90132 9.09071 3.91295 12.0554C3.88375 14.8473 3.87225 17.6383 3.86608 20.4304C3.8535 20.5252 3.84271 20.641 3.83093 20.8327C3.8042 21.2679 3.79386 22.7579 3.82311 23.3444C3.84231 23.7294 3.84221 23.8587 3.85826 23.9616C3.85728 27.5371 3.86596 31.1127 3.86608 34.6882C3.87182 35.7506 3.87432 36.8133 3.8778 37.8757C3.73998 37.898 3.70853 38.0312 3.63951 38.2077C3.55589 38.4216 3.54907 38.4991 3.52233 38.9343C3.49559 39.3695 3.48526 40.8555 3.51452 41.4421C3.54377 42.0287 3.52471 42.0384 3.59264 42.2312C3.66058 42.424 3.75764 42.525 3.83093 42.5944C3.84925 42.6118 3.86744 42.629 3.88561 42.6413C3.88945 45.6532 3.89318 48.6645 3.89733 51.6765C3.74934 51.5845 3.58734 51.4899 3.36998 51.3718C3.04507 51.1952 2.53024 50.93 2.15514 50.7702C1.78005 50.6104 1.36816 50.4615 1.13171 50.3991C0.895243 50.3367 0.854644 50.3227 0.760607 50.3366C0.666582 50.3506 0.625995 50.3679 0.584833 50.4226C0.556659 50.46 0.543786 50.5108 0.541858 50.5632C0.541468 50.5721 0.541468 50.5815 0.541858 50.5905V50.5905ZM3.8778 40.321C3.87663 40.2098 3.87663 40.0835 3.88171 39.9616C3.8821 40.1349 3.88132 40.3079 3.88171 40.4812C3.87956 40.426 3.87835 40.3695 3.8778 40.321V40.321ZM5.30749 8.7546C5.28795 7.97655 5.40457 7.09931 5.64733 6.62568C6.24167 5.46619 7.15722 4.77078 8.4481 4.50069C8.86946 4.41255 9.48169 4.20251 9.81139 4.03585C10.7922 3.54007 12.2102 3.08383 12.6356 3.12568L13.0301 3.16475L12.6669 3.55147C12.4676 3.76399 11.8949 4.12764 11.3934 4.35616C8.49084 5.67891 6.80019 7.44517 5.85436 10.1374C5.77206 10.3717 5.76299 10.3699 5.60046 10.1492C5.41957 9.90341 5.32269 9.35978 5.30749 8.75463L5.30749 8.7546ZM5.55358 50.6179C5.55202 50.3662 5.553 50.0784 5.55358 49.7585C5.55769 47.6261 5.60467 44.0745 5.68248 40.3523L5.73718 37.696L7.36217 36.6608C8.25415 36.0922 9.06923 35.6107 9.17467 35.5905C9.36386 35.5544 9.36348 35.564 9.35046 36.3913C9.34319 36.8524 9.30885 38.0545 9.27233 39.0593C9.16916 41.8978 8.71427 46.2748 8.23718 49.0398L8.04967 50.1452L7.49499 50.5007C7.19121 50.6964 6.66012 51.0605 6.3114 51.3093C5.96267 51.558 5.64096 51.7756 5.59655 51.7937C5.57435 51.8027 5.55839 51.373 5.55358 50.6179V50.6179ZM5.64342 75.5358C5.64343 75.3328 5.64225 75.1024 5.64342 74.8405C5.65504 72.0191 5.87172 71.5153 6.60046 72.5944C7.02148 73.2179 9.45952 77.2317 10.4051 78.8562C11.2092 80.2373 11.6723 80.7814 12.5692 81.3991C12.9302 81.6478 13.3059 82.0255 13.409 82.2429C13.6007 82.6467 13.6568 83.2764 13.5145 83.4187C13.4704 83.4627 13.1171 83.5007 12.7294 83.5007C11.9763 83.5007 11.4136 83.2719 10.1122 82.446C9.04131 81.7664 7.54084 80.4442 6.95202 79.6608C6.65079 79.2601 6.22935 78.487 6.01843 77.9421C5.68528 77.0813 5.64336 76.957 5.64342 75.5358V75.5358ZM5.80358 33.0554C5.8028 32.7333 5.81511 32.2265 5.83483 31.4421C6.00053 24.8586 6.14602 20.5766 6.20201 20.5241C6.29579 20.436 7.80613 20.1921 8.26061 20.1921C8.96872 20.1921 8.94871 20.1368 9.07702 22.5788C9.16287 24.2129 9.35591 30.4056 9.36608 31.8796C9.36705 32.023 9.08248 32.1806 7.72546 32.7898C6.82325 33.1947 6.01613 33.5545 5.93249 33.5866C5.84213 33.6213 5.80483 33.5921 5.80358 33.0554V33.0554ZM6.7489 16.5827C6.74429 16.4406 6.75446 16.2645 6.77233 16.0398C6.84237 15.1588 7.13882 13.0687 7.20983 12.9538C7.36236 12.7071 7.81297 13.9771 8.1278 15.5319C8.36212 16.6892 8.37585 16.8237 8.26061 17.1101C8.15358 17.3761 7.83187 17.4288 7.33092 17.2624C6.9051 17.121 6.76273 17.0091 6.7489 16.5827ZM7.47936 63.2077C7.47936 62.8318 9.75921 52.4631 10.2372 50.6648C10.5594 49.4523 11.3123 47.2244 11.909 45.7155C13.2669 42.2823 13.7294 40.5261 13.7294 38.7937C13.7294 37.4749 13.7644 37.3988 14.9208 36.3171L16.1122 35.2038L22.0184 35.2038L27.9286 35.2038L29.0887 36.2898L30.245 37.3718L30.37 39.4733C30.4668 41.1309 30.6803 42.055 31.3817 43.8562C33.1296 48.3445 33.982 51.2672 35.1434 56.7155C35.7915 59.7558 36.3773 62.4841 36.4442 62.778C36.5423 63.2085 36.3913 63.4007 35.663 63.7702C34.5429 64.3385 30.6441 65.5878 28.87 65.946C24.9573 66.736 17.9997 66.674 14.5692 65.821C11.3701 65.0256 7.47936 63.5913 7.47936 63.2077V63.2077ZM8.70983 7.50459C8.67735 6.84157 9.2501 6.64069 10.6044 5.91866C14.2877 3.95487 17.4599 3.36025 23.2997 3.54366C27.8812 3.68754 29.642 4.07723 32.87 5.66476C35.6828 7.04807 35.702 7.08436 34.7294 9.12568C34.2885 10.051 33.6941 11.432 33.4091 12.1921C33.124 12.9522 32.8474 13.5749 32.7958 13.5749C32.7441 13.5749 31.9573 13.198 31.0458 12.739C28.1849 11.2983 25.9107 10.826 21.9012 10.8405C17.8877 10.8551 15.8943 11.279 13.0106 12.7312C12.0566 13.2116 11.2479 13.5696 11.2137 13.528C11.1796 13.4865 10.5438 12.057 9.79968 10.3523C9.12786 8.81316 8.73509 8.02028 8.70983 7.50459V7.50459ZM30.37 83.1335C30.3616 83.0381 30.3781 82.9201 30.413 82.7741C30.5837 82.0595 30.6661 81.9551 31.495 81.3523C32.4784 80.637 32.8038 80.2294 33.8309 78.4538C35.3529 75.8226 37.5701 72.284 37.7762 72.1569C38.218 71.8845 38.2919 72.2087 38.3192 74.6413C38.3417 76.6499 38.3149 77.0309 38.1161 77.5788C37.4514 79.4108 36.2112 80.8689 34.1473 82.2429C32.6284 83.2541 32.073 83.4936 31.245 83.4968C30.6381 83.4992 30.395 83.4196 30.37 83.1335V83.1335ZM30.9989 3.16475L31.3583 3.12959C31.7747 3.08719 33.3545 3.59247 34.1356 4.02022C34.4273 4.17993 35.0481 4.39172 35.5145 4.48897C37.5002 4.90299 38.732 6.43686 38.6981 8.44601C38.6913 8.84708 38.6485 9.33921 38.6004 9.53976C38.5524 9.74028 38.4536 10.0089 38.3817 10.1374C38.2593 10.3561 38.2435 10.3474 38.1083 10.0124C37.4785 8.45247 36.9561 7.59428 36.1434 6.77022C35.1734 5.78661 34.2734 5.16798 32.6395 4.36788C32.0189 4.06396 31.3941 3.67167 31.2528 3.49288L30.9989 3.16475ZM34.6434 32.0554L34.663 30.3523C34.6863 28.2848 34.8288 24.2196 34.952 22.0202C35.0254 20.7097 35.0674 20.3877 35.1786 20.3015C35.3675 20.155 36.1138 20.1704 37.0223 20.3444L37.784 20.4929L37.8426 20.8757C37.8987 21.2466 38.0303 25.6752 38.1434 31.0163C38.1826 32.8668 38.1724 33.6333 38.1083 33.6101C38.0583 33.592 37.2583 33.2351 36.3309 32.8171L34.6434 32.0554V32.0554ZM34.6786 37.0866C34.677 36.1697 34.7136 35.5749 34.7997 35.5749C34.911 35.5749 37.9358 37.4467 38.1512 37.6491C38.2574 37.7489 38.3144 39.9248 38.4559 49.403L38.495 51.8835L38.0145 51.5358C37.7507 51.3434 37.1784 50.9547 36.745 50.6726C36.2643 50.3597 35.9409 50.0887 35.9169 49.9812C35.7017 49.0186 35.2115 45.3415 34.9911 43.0515C34.7967 41.0324 34.6813 38.6148 34.6786 37.0866V37.0866ZM35.7098 16.6608C35.7147 16.3075 35.8009 15.806 35.9559 15.1218C36.3442 13.408 36.727 12.5425 36.8465 13.114C36.9617 13.6648 37.1602 15.284 37.2098 16.0866L37.2606 16.9499L36.9794 17.1218C36.8245 17.216 36.5482 17.3176 36.3661 17.3483C35.9103 17.4253 35.7016 17.2497 35.7098 16.6608V16.6608Z" fill="#222222"/>
</svg> */
  // School bus
  /*
  <path d="M32.4375 1.06251C23.625 1.59376 17.75 3.06251 13.75 5.71876C11.7812 6.96876 10.0937 9.00001 9.375 10.875C8.625 12.875 8.625 13 8.625 28.8125V43.625L12.2812 43.5938L15.9375 43.5625L16.5625 43.125C16.9062 42.875 17.8437 41.9063 18.6562 40.9375C20.75 38.4375 22.1875 37.4375 24.3125 37.0625C24.9063 36.9688 29.125 36.9063 36.6875 36.9063C49.3438 36.9063 49.4375 36.9063 51.1875 37.8438C52.4062 38.5 53.1875 39.2188 54.8437 41.1875C55.9062 42.4688 56.4062 42.9375 57.0312 43.25C57.8125 43.6563 57.875 43.6563 61.25 43.6563H64.6562V41.5313V39.375L67.9375 39.3438L71.2187 39.3125L71.9062 38.8438C72.875 38.1563 73.25 37.3125 73.25 35.75V34.4688H74.4062C75.1563 34.4688 75.75 34.375 76 34.25C76.9062 33.7813 76.9062 33.75 76.9062 26.5938C76.9062 18.5313 77 18.8438 74.625 18.7188L73.3125 18.6563L73.25 17.2813C73.1562 15.7188 72.9062 15.1563 71.9687 14.375L71.375 13.9063L68.0312 13.875L64.6875 13.8438L64.5937 13.2813C63.9062 9.15626 61.9375 6.59376 57.9375 4.53126C54.7187 2.84376 50.5312 1.81251 44.75 1.25001C43.125 1.09376 34.125 0.937514 32.4375 1.06251ZM48.625 6.78126C49.2187 7.25001 49.4687 7.87501 49.4687 8.87501C49.4687 10 49.0937 10.75 48.4062 11.0938C47.9062 11.3438 47.0313 11.375 36.9688 11.375C25.0938 11.375 25.3125 11.375 24.75 10.5313C24.5625 10.2188 24.4688 9.81251 24.4688 8.93751C24.4688 7.65626 24.7188 7.09376 25.4688 6.68751C25.75 6.53126 28.4375 6.50001 37.0313 6.50001C48.1562 6.46876 48.2188 6.46876 48.625 6.78126ZM20.2813 7.68751C21.0625 8.56251 20.7813 10.0313 19.7188 10.5313C19.0625 10.8438 18.8125 10.8438 18.1562 10.5313C16.8437 9.90626 16.8437 7.81251 18.1562 7.25001C18.3125 7.18751 18.7812 7.15626 19.1562 7.18751C19.7187 7.18751 19.9688 7.31251 20.2813 7.68751ZM56.1562 7.56251C57.6562 8.96876 56.0312 11.4063 54.1562 10.5313C53.5 10.2188 53.1562 9.62501 53.1562 8.84376C53.1562 8.12501 53.375 7.75001 53.9687 7.37501C54.625 6.96876 55.625 7.03126 56.1562 7.56251ZM59.2187 14.3438L59.75 14.875V24.1563V33.4375L59.3125 33.9375L58.875 34.4375L36.9375 34.4688C20.7187 34.5 14.9063 34.4688 14.5938 34.3438C14.375 34.25 14.0313 33.9688 13.875 33.75C13.5938 33.3438 13.5625 33.0313 13.5625 24.125V14.8438L14.0937 14.3125L14.625 13.7813H36.6875H58.75L59.2187 14.3438ZM70.4687 16.5313C70.6875 16.7188 70.75 17 70.75 17.75V18.7188H69.5937C68.2187 18.7188 67.6562 18.9375 67.3125 19.6875C67.0937 20.1563 67.0625 21 67.0625 26.5C67.0625 33.3438 67.0625 33.5 67.9062 34.125C68.25 34.4063 68.5312 34.4688 69.5312 34.4688H70.75V35.3438C70.75 36.9063 70.75 36.9063 67.4375 36.9063H64.625V26.5938V16.25H67.4062C69.7812 16.25 70.2187 16.2813 70.4687 16.5313Z" fill="black"/>
  <path d="M24.7187 39.625C23.2187 39.9688 22.0937 40.8438 20.5312 42.8125C19.6562 43.9375 18.9687 44.6563 18.4687 44.9688L17.75 45.4375L11.1875 45.5C4.875 45.5625 4.625 45.5938 4.21875 45.9063C4 46.0625 3.65625 46.4063 3.46875 46.625C3.15625 47.0313 3.15625 47.2188 3.09375 56.6563L3.125 66.2188L3.46875 66.75C4.0625 67.625 4.71875 67.9688 5.8125 67.9688H6.78125V72.25C6.78125 75.7813 6.8125 76.6563 7 77.125C7.3125 77.875 7.78125 78.375 8.53125 78.6875C9.09375 78.9375 9.59375 78.9688 13.4375 78.9688C18.25 78.9688 18.5 78.9063 19.4375 77.8438C20.1563 77.0626 20.25 76.25 20.25 71.8438V67.9688L36.6563 68L53.0625 68.0313L53.125 72.4688C53.1875 77.25 53.2188 77.3751 54.0625 78.1563C54.875 78.9063 55.25 78.9688 59.7813 78.9688C63.25 78.9688 64.0938 78.9375 64.5625 78.75C65.2813 78.4375 65.7813 78 66.125 77.2813C66.375 76.75 66.4063 76.3438 66.4063 72.3438V68L67.5313 67.9688C68.3438 67.9375 68.75 67.8125 69.0938 67.5625C70.0938 66.8438 70.0625 67.1563 70.0625 56.7188C70.0625 47.375 70.0625 47.25 69.75 46.6875C69.5625 46.375 69.1563 45.9688 68.8438 45.7813C68.2813 45.4688 68.0938 45.4688 62.25 45.4688C58.4375 45.4688 56 45.4063 55.5938 45.3125C54.625 45.0625 53.9063 44.4688 52.75 42.9375C51.0938 40.75 50.125 40.0313 48.3125 39.5938C46.9688 39.25 26.1562 39.2813 24.7187 39.625ZM50.4688 47.6563C50.625 47.875 50.7188 48.3438 50.7188 48.8125C50.7188 49.4688 50.6563 49.6875 50.3438 50L49.9688 50.375H36.6875C21.2188 50.375 22.6562 50.5313 22.6562 48.7813C22.6562 47.9688 22.7188 47.7188 22.9375 47.5313C23.1875 47.3438 25.3125 47.3125 36.75 47.3125H50.25L50.4688 47.6563ZM14.8437 51.4688C15.875 52 16.8125 53 17.3125 54.0938C17.625 54.8125 17.7188 55.2188 17.7188 56.0938C17.7188 58.4063 16.4375 60.1875 14.2813 61.0313C13.2813 61.4063 11.3125 61.3125 10.375 60.8125C9.375 60.2813 8.40625 59.3438 7.9375 58.375C7.5625 57.625 7.5 57.3438 7.5 56.1563C7.5 54.9688 7.5625 54.6875 7.9375 53.9063C8.46875 52.8438 9.59375 51.75 10.6875 51.3438C11.8125 50.8438 13.75 50.9375 14.8437 51.4688ZM62.5938 51.3125C63.8125 51.75 65.0625 53.0313 65.5313 54.25C66 55.5 65.9375 57.25 65.375 58.375C64.9063 59.2813 63.9063 60.2813 62.9688 60.75C62.375 61.0625 62.0625 61.125 60.75 61.125C59.4375 61.125 59.125 61.0938 58.5313 60.75C57.5938 60.25 56.5938 59.2813 56.125 58.375C55.75 57.6875 55.7188 57.4375 55.7188 56.0938C55.7188 54.7188 55.75 54.5 56.125 53.7813C56.6563 52.7813 57.875 51.6875 58.9063 51.2813C59.9688 50.875 61.4375 50.9063 62.5938 51.3125ZM50.4688 53.1563C50.625 53.375 50.7188 53.8438 50.7188 54.3125C50.7188 54.9688 50.6563 55.1875 50.3438 55.5L49.9688 55.875H36.6875C21.25 55.875 22.6562 56.0313 22.6562 54.3125C22.6562 52.6875 21.1563 52.8438 36.6563 52.8438H50.25L50.4688 53.1563ZM50.4688 58.6563C50.7813 59.0938 50.7813 60.4375 50.4688 60.875L50.25 61.2188H36.6563C21.1563 61.2188 22.6562 61.375 22.6562 59.75C22.6562 58.125 21.1875 58.2813 36.6563 58.2813H50.25L50.4688 58.6563Z" fill="black"/>
  */
  // Bus
  /* 
  <path d="M3.02441 7.53932C3.10481 5.42571 3.55527 3.41211 5.19037 1.95202C5.76616 1.43786 6.65925 1.16452 7.45 1.02851C9.3221 0.706515 11.2197 0.532708 13.1368 0.232839C16.1146 0.166687 19.0625 0.166687 22.0885 0.166687C23.0117 0.277818 23.8607 0.364838 24.7008 0.505526C26.0862 0.737527 27.4671 0.996879 28.8472 1.25851C30.0366 1.48397 30.7468 2.28114 31.2418 3.31979C31.8753 4.64906 32.3482 6.02043 32.2699 7.56655C31.8698 7.28164 31.5307 6.94885 31.1864 6.55074C31.2091 5.51963 30.6911 4.81225 30.0343 4.20596C28.6724 2.94882 27.0082 2.48877 25.1547 2.42131C24.7351 2.27518 24.3545 2.17774 23.9739 2.08029C23.956 2.12769 23.938 2.17508 23.92 2.22247C24.0665 2.35216 24.213 2.48185 24.3505 2.66872C24.339 2.76442 24.3366 2.80295 24.2629 2.84661C22.3505 2.61821 20.5093 2.38468 18.6666 2.107C18.6617 2.03352 18.6583 2.00417 18.6377 1.93316C18.5607 1.82687 18.5009 1.76224 18.5217 1.6861C19.1402 1.69913 19.6782 1.72367 20.2559 1.77799C20.4594 1.78616 20.6232 1.76454 20.787 1.74292C20.7947 1.67148 20.8024 1.60003 20.8102 1.52859C20.5815 1.47037 20.3528 1.41216 20.0486 1.35623C17.8331 1.41417 15.693 1.46982 13.4978 1.52079C13.4177 1.6258 13.3926 1.73551 13.4075 1.88942C14.6021 1.88139 15.7567 1.82915 16.8627 1.82562C16.8021 1.91852 16.79 1.96271 16.7498 2.02949C16.69 2.09047 16.6719 2.13444 16.6012 2.20463C14.6957 2.40526 12.8564 2.58526 10.9369 2.7731C11.0811 2.55668 11.1862 2.39901 11.4376 2.0217C10.847 2.21411 10.4957 2.32855 10.0734 2.45303C8.93379 2.6952 7.79715 2.7701 6.81285 3.19659C5.36396 3.82437 4.14263 4.79415 4.08687 6.64876C3.69908 6.96104 3.36175 7.25018 3.02441 7.53932ZM22.1086 1.60318C21.9488 1.57935 21.7889 1.55552 21.5307 1.51701C21.972 2.06211 21.972 2.06211 22.1086 1.60318ZM22.7247 2.06301C22.8845 2.08714 23.0444 2.11126 23.3037 2.15039C22.8592 1.60553 22.8592 1.60553 22.7247 2.06301ZM12.6885 1.87749C12.5465 1.9153 12.4045 1.95311 12.2624 1.99092C12.2924 2.06064 12.3224 2.13035 12.3523 2.20006C12.4882 2.11831 12.6241 2.03655 12.6885 1.87749Z" fill="#2F4050"/>
  <path d="M0.166656 18.9062C0.858793 18.1363 1.74949 17.9371 2.80914 17.8601C3.33739 17.8544 3.73416 17.8206 4.13093 17.7869C4.13093 18.1192 4.65879 19.5905 4.65879 19.5905H3.31366H2.80914C1.9747 19.7562 1.14299 19.8348 0.237599 20.0002C0.166656 19.6597 0.166656 19.3194 0.166656 18.9062Z" fill="#2E4050"/>
  <path d="M32.5122 17.8273C33.4419 17.9371 34.3703 18.0503 35.1099 18.818C35.1666 19.1736 35.1666 19.5139 35.1666 19.9271C34.3278 19.8348 33.489 19.6697 32.5471 19.4546C32.271 19.3884 32.0981 19.3722 31.941 19.3574C31.9533 19.0889 31.9612 19.6991 31.941 19.3574H30.7227C30.8083 19.0243 31.1162 18.7688 31.0928 18.4661C31.0342 17.7117 31.3028 17.5617 31.9591 17.7766C32.1306 17.8328 32.3271 17.8125 32.5122 17.8273Z" fill="#2F4050"/>
  <path d="M32.5074 17.7498C32.3272 17.8125 32.1307 17.8328 31.9591 17.7766C31.3028 17.5617 31.0342 17.7117 31.0928 18.4661C31.1163 18.7688 30.7647 19.0824 30.6791 19.4155C30.4934 20.1378 30.3521 20.873 30.2223 21.6082C29.5103 25.6406 29.2985 29.7042 29.491 33.7911C29.5035 34.0561 29.5642 34.3188 29.604 34.5931C30.6127 34.6261 31.154 34.2046 31.2338 33.2775C31.3668 31.7315 31.4987 30.1847 31.5843 28.6356C31.7388 25.8377 31.8612 23.0379 31.9895 20.2386C32.0018 19.97 31.9613 19.6991 31.941 19.3574C32.0981 19.3722 32.2711 19.3884 32.4815 19.4552C32.5125 24.5008 32.5015 29.4957 32.5007 34.4906C32.4972 54.3324 32.4969 74.1743 32.4842 94.0934L31.5231 96.6666L29.4746 97.7073C25.5 98.7499 10.7129 98.8996 5.78217 97.7158L3.88504 96.6666L2.94105 94.1045C2.85433 93.6925 2.83468 93.2767 2.83463 92.8609C2.83176 68.4601 2.83052 44.0593 2.8205 19.581C3.15099 19.226 3.32589 19.2406 3.34756 19.744C3.50137 23.3173 3.66572 26.8901 3.83587 30.4627C3.87542 31.2931 3.91717 32.1258 4.01667 32.9504C4.16381 34.1699 4.36932 34.3618 5.66917 34.6349C5.72616 34.3501 5.81982 34.0681 5.83424 33.7822C6.06703 29.1654 5.72631 24.5885 4.81141 20.0585C4.71657 19.5889 4.43217 19.1577 4.13093 18.7838C4.13093 18.4515 4.13093 18.1192 4.13093 17.7869C3.73416 17.8206 3.33739 17.8544 2.87799 17.8569C2.87796 14.4434 2.94056 11.0612 3.01379 7.60914C3.36175 7.25015 3.69908 6.961 4.11404 6.70374C4.77222 7.58535 5.88912 7.90741 6.81058 7.30491C8.56816 6.15569 9.64385 4.48269 10.1444 2.44296C10.4957 2.32852 10.847 2.21408 11.4376 2.02167C11.1862 2.39898 11.0811 2.55665 10.9369 2.77307C12.8564 2.58523 14.6957 2.40523 16.6663 2.20801C16.8404 2.18349 16.8833 2.17621 16.9649 2.16994C17.0037 2.17096 17.0726 2.20679 17.0732 2.21471C17.0739 2.22263 17.0572 2.20573 17.1363 2.19444C17.6335 2.17751 18.0518 2.17188 18.5199 2.16691C18.6025 2.16209 18.6353 2.1566 18.6681 2.15112C20.5093 2.38465 22.3505 2.61819 24.3108 2.84483C24.4065 2.76246 24.383 2.68698 24.3596 2.61151C24.213 2.48182 24.0665 2.35213 23.92 2.22244C23.938 2.17505 23.956 2.12766 23.9739 2.08027C24.3545 2.17771 24.7351 2.27515 25.1337 2.48443C25.7481 4.39138 26.6778 5.97655 28.2116 7.1216C29.299 7.93341 30.5717 7.67841 31.1917 6.61603C31.5307 6.94882 31.8698 7.28161 32.2578 7.64005C32.372 11.0012 32.4373 14.3367 32.5074 17.7498ZM28.9988 34.5577C29.0036 32.6698 29.0005 30.7818 29.0148 28.894C29.0371 25.9484 29.2732 23.0312 29.9331 20.1445C30.2522 18.7486 30.432 17.3012 30.4879 15.8698C30.5634 13.9361 29.8985 13.178 28.0141 12.6925C24.6682 11.8305 21.2657 11.3689 17.8115 11.3543C14.1047 11.3386 10.4525 11.7791 6.8841 12.8196C5.74265 13.1524 4.95562 13.8402 4.86586 15.0731C4.80584 15.8977 4.80057 16.747 4.92798 17.5606C5.35232 20.2703 5.84601 22.9692 6.31981 25.6711C6.34754 25.8292 6.43431 25.977 6.49361 26.1296C6.53793 26.1178 6.58226 26.106 6.62658 26.0942C6.62658 25.6667 6.62658 25.2391 6.62658 24.7883C13.9903 23.6173 21.3234 23.6184 28.7405 24.8125C28.7405 28.369 28.7405 31.9265 28.7405 35.4839C28.8128 35.4852 28.8851 35.4865 28.9573 35.4878C28.971 35.2312 28.9846 34.9746 28.9988 34.5577ZM29.0859 37.7204C29.0056 38.1776 28.857 38.6346 28.8555 39.092C28.8388 44.146 28.8449 49.2001 28.845 54.2542C28.8452 65.53 28.8448 76.8058 28.8495 88.0816C28.8497 88.3836 28.8652 88.6971 28.9451 88.9854C29.1216 89.6228 29.5937 89.9694 30.2336 89.9726C30.8726 89.9758 31.3606 89.644 31.5231 88.9974C31.6162 88.6271 31.6389 88.2311 31.6393 87.8466C31.6562 74.6299 31.6692 61.4133 31.6759 48.1966C31.6775 45.0645 31.6554 41.9323 31.6436 38.8002C31.6411 38.1246 31.4885 37.4985 30.8067 37.2121C30.191 36.9534 29.609 37.0687 29.0859 37.7204ZM3.87382 79.9166C3.87381 81.499 3.87348 83.0813 3.87391 84.6637C3.87423 85.8574 3.84845 87.052 3.88504 88.2446C3.91373 89.1797 4.51909 89.8096 5.28474 89.8016C6.07064 89.7934 6.62622 89.161 6.66537 88.2247C6.67348 88.0307 6.66739 87.8361 6.66742 87.6417C6.66828 80.7314 6.66951 73.8211 6.66982 66.9108C6.67023 57.5716 6.67103 48.2325 6.6685 38.8933C6.66818 37.7426 6.15965 37.0851 5.28754 37.0736C4.4203 37.0623 3.89698 37.7261 3.87426 38.8691C3.8704 39.0633 3.87339 39.2577 3.8734 39.4521C3.87348 42.8092 3.87365 46.1663 3.87368 49.5234C3.87376 59.5989 3.8738 69.6744 3.87382 79.9166ZM26.2185 93.6431C26.5219 93.6151 26.8307 93.6139 27.1276 93.554C28.0009 93.3778 28.2739 92.9806 28.1935 92.0848C28.1142 91.2027 27.4245 91.5058 26.982 91.5198C24.8483 91.5872 22.7157 91.8158 20.5842 91.7986C16.4267 91.7651 12.2704 91.5965 8.11291 91.5177C7.79589 91.5117 7.25261 91.7147 7.19703 91.9227C7.05171 92.4667 7.01354 93.1187 7.73253 93.396C8.01301 93.5042 8.31807 93.5849 8.61667 93.604C10.7472 93.74 12.8795 93.9677 15.0101 93.9552C18.6953 93.9335 22.3797 93.7591 26.2185 93.6431ZM32.2203 33.1683C32.0893 32.9999 31.9584 32.8316 31.8274 32.6633C31.7185 32.8537 31.5001 33.0588 31.5232 33.2316C31.5739 33.6115 31.7468 33.9752 31.8698 34.3454C31.9943 33.997 32.1187 33.6485 32.2203 33.1683ZM3.11318 33.8323C3.24383 34.0013 3.37447 34.1702 3.50512 34.3392C3.61426 34.1488 3.83303 33.9439 3.81011 33.771C3.75966 33.3903 3.58719 33.0258 3.46451 32.6547C3.33973 33.0033 3.21495 33.3518 3.11318 33.8323Z" fill="#F3D03F"/>
  */
}

function App() {
  const [googleMap, setGoogleMap] = useState<google.maps.Map>();
  const [curPos, setCurPos] = useState(0);
  const [curRot, setCurRot] = useState(0);
  const [coordinate, setCoordinate] = useState(center);

  const props = useSpring({
    val: 0,
    from: { val: 1 },
    config: { duration: 1000 },
    onChange: () => {
      const value = props.val.get();
      if (curPos > 0) {
        const latDiff =
          (positions[curPos].lat - positions[curPos - 1].lat) * value;
        const lngDiff =
          (positions[curPos].lng - positions[curPos - 1].lng) * value;
        const newCoord = {
          lat: positions[curPos].lat - latDiff,
          lng: positions[curPos].lng - lngDiff,
        };
        setCoordinate(newCoord);
      }
    },
  });

  const getRotation = (cPos: Position, nPos: Position) => {
    if (!cPos || !nPos) {
      return 0;
    }
    const latDiff = cPos.lat - nPos.lat;
    const lngDiff = cPos.lng - nPos.lng;
    return (Math.atan2(lngDiff, latDiff) * 180.0) / Math.PI;
  };

  const animate = (newCurPos: number) => {
    const newRot = getRotation(positions[curPos], positions[newCurPos]);
    setCurRot(newRot);
    setCurPos(newCurPos);
    props.val.reset();
    props.val.start();
  };

  const doUpdate = () => {
    const newCurPos = curPos + 1;
    if (newCurPos >= positions.length) return;

    animate(newCurPos);
  };

  useEffect(() => {
    setTimeout(() => {
      doUpdate();
    }, 1500);
  }, [curPos]);

  return (
    <div className="h-full">
      <LoadScript
        googleMapsApiKey={process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY as string}
        libraries={libraries as Libraries}
      >
        <GoogleMap
          onLoad={(map) => {
            setGoogleMap(map);
          }}
          mapContainerStyle={{ width: '100%', height: '100%' }}
          zoom={17}
          center={center}
        >
          {/* pin */}
          {googleMap && (
            <Marker
              position={coordinate}
              icon={{
                path: 'M31.9756 91.4607C31.8952 93.5743 31.4447 95.5879 29.8096 97.048C29.2338 97.5621 28.3407 97.8355 27.55 97.9715C25.6779 98.2935 23.7803 98.4673 21.8632 98.7672C18.8854 98.8333 15.9375 98.8333 12.9115 98.8333C11.9883 98.7222 11.1393 98.6352 10.2992 98.4945C8.91384 98.2625 7.53293 98.0031 6.15277 97.7415C4.96343 97.516 4.25318 96.7189 3.75818 95.6802C3.12467 94.3509 2.65184 92.9796 2.7301 91.4334C3.13023 91.7184 3.46928 92.0512 3.81356 92.4493C3.79087 93.4804 4.30886 94.1877 4.96569 94.794C6.32761 96.0512 7.99185 96.5112 9.84533 96.5787C10.2649 96.7248 10.6455 96.8223 11.0261 96.9197C11.044 96.8723 11.062 96.8249 11.08 96.7775C10.9335 96.6478 10.787 96.5182 10.6495 96.3313C10.661 96.2356 10.6634 96.1971 10.7371 96.1534C12.6495 96.3818 14.4907 96.6153 16.3334 96.893C16.3383 96.9665 16.3417 96.9958 16.3623 97.0668C16.4393 97.1731 16.4991 97.2378 16.4783 97.3139C15.8598 97.3009 15.3218 97.2763 14.7441 97.222C14.5406 97.2138 14.3768 97.2355 14.213 97.2571C14.2053 97.3285 14.1976 97.4 14.1898 97.4714C14.4185 97.5296 14.6472 97.5878 14.9514 97.6438C17.1669 97.5858 19.307 97.5302 21.5022 97.4792C21.5823 97.3742 21.6074 97.2645 21.5925 97.1106C20.3979 97.1186 19.2433 97.1708 18.1373 97.1744C18.1979 97.0815 18.21 97.0373 18.2502 96.9705C18.31 96.9095 18.3281 96.8656 18.3988 96.7954C20.3043 96.5947 22.1436 96.4147 24.0631 96.2269C23.9189 96.4433 23.8138 96.601 23.5624 96.9783C24.153 96.7859 24.5043 96.6715 24.9266 96.547C26.0662 96.3048 27.2028 96.2299 28.1871 95.8034C29.636 95.1756 30.8574 94.2059 30.9131 92.3512C31.3009 92.039 31.6383 91.7498 31.9756 91.4607ZM12.8914 97.3968C13.0512 97.4207 13.2111 97.4445 13.4693 97.483C13.028 96.9379 13.028 96.9379 12.8914 97.3968ZM12.2753 96.937C12.1155 96.9129 11.9556 96.8887 11.6963 96.8496C12.1408 97.3945 12.1408 97.3945 12.2753 96.937ZM22.3115 97.1225C22.4535 97.0847 22.5955 97.0469 22.7376 97.0091C22.7076 96.9394 22.6776 96.8696 22.6477 96.7999C22.5118 96.8817 22.3759 96.9635 22.3115 97.1225Z M34.8333 80.0938C34.1412 80.8637 33.2505 81.0629 32.1909 81.1399C31.6626 81.1456 31.2658 81.1794 30.8691 81.2131C30.8691 80.8808 30.3412 79.4095 30.3412 79.4095H31.6863H32.1909C33.0253 79.2438 33.857 79.1652 34.7624 78.9998C34.8333 79.3403 34.8333 79.6806 34.8333 80.0938Z M2.48781 81.1727C1.55813 81.0629 0.629744 80.9497 -0.109943 80.182C-0.166599 79.8264 -0.166598 79.4861 -0.166598 79.0729C0.672205 79.1652 1.51101 79.3303 2.45292 79.5454C2.72899 79.6116 2.90195 79.6278 3.05905 79.6426C3.04674 79.9111 3.03877 79.3009 3.05905 79.6426H4.27731C4.19167 79.9757 3.88376 80.2312 3.90725 80.5339C3.96581 81.2883 3.69721 81.4383 3.0409 81.2234C2.86939 81.1672 2.67285 81.1875 2.48781 81.1727Z M2.4926 81.2502C2.67281 81.1875 2.86935 81.1672 3.04086 81.2234C3.69717 81.4383 3.96577 81.2883 3.90721 80.5339C3.88371 80.2312 4.23525 79.9176 4.3209 79.5845C4.50665 78.8622 4.64794 78.127 4.77775 77.3918C5.48972 73.3594 5.70154 69.2958 5.50902 65.2089C5.49653 64.9439 5.43582 64.6812 5.39602 64.4069C4.38725 64.3739 3.84597 64.7954 3.76619 65.7225C3.63316 67.2685 3.50129 68.8153 3.41573 70.3644C3.26118 73.1623 3.13878 75.9621 3.01048 78.7614C2.99817 79.03 3.03873 79.3009 3.05901 79.6426C2.9019 79.6278 2.72894 79.6116 2.51855 79.5448C2.48746 74.4992 2.49845 69.5043 2.49932 64.5094C2.50278 44.6676 2.50307 24.8257 2.51579 4.90664L3.47692 2.33339L5.52538 1.29275C9.50002 0.250054 24.2871 0.100421 29.2178 1.28416L31.115 2.33339L32.059 4.89555C32.1457 5.30747 32.1653 5.72329 32.1654 6.13912C32.1682 30.5399 32.1695 54.9407 32.1795 79.419C31.849 79.774 31.6741 79.7594 31.6524 79.256C31.4986 75.6827 31.3343 72.1099 31.1641 68.5373C31.1246 67.7069 31.0828 66.8742 30.9833 66.0496C30.8362 64.8301 30.6307 64.6382 29.3308 64.3651C29.2738 64.6499 29.1802 64.9319 29.1658 65.2178C28.933 69.8346 29.2737 74.4115 30.1886 78.9415C30.2834 79.4111 30.5678 79.8423 30.8691 80.2162C30.8691 80.5485 30.8691 80.8808 30.8691 81.2131C31.2658 81.1794 31.6626 81.1456 32.122 81.1431C32.122 84.5566 32.0594 87.9388 31.9862 91.3909C31.6383 91.7499 31.3009 92.039 30.886 92.2963C30.2278 91.4147 29.1109 91.0926 28.1894 91.6951C26.4318 92.8443 25.3561 94.5173 24.8556 96.557C24.5043 96.6715 24.153 96.7859 23.5624 96.9783C23.8138 96.601 23.9189 96.4433 24.0631 96.2269C22.1436 96.4148 20.3043 96.5948 18.3337 96.792C18.1596 96.8165 18.1167 96.8238 18.0351 96.8301C17.9963 96.829 17.9274 96.7932 17.9268 96.7853C17.9261 96.7774 17.9428 96.7943 17.8637 96.8056C17.3665 96.8225 16.9482 96.8281 16.4801 96.8331C16.3975 96.8379 16.3647 96.8434 16.3319 96.8489C14.4907 96.6153 12.6495 96.3818 10.6892 96.1552C10.5935 96.2375 10.617 96.313 10.6404 96.3885C10.787 96.5182 10.9335 96.6479 11.08 96.7776C11.062 96.825 11.044 96.8723 11.0261 96.9197C10.6455 96.8223 10.2649 96.7248 9.86635 96.5156C9.2519 94.6086 8.32216 93.0234 6.78842 91.8784C5.70104 91.0666 4.42826 91.3216 3.80832 92.384C3.46927 92.0512 3.13023 91.7184 2.74223 91.36C2.62801 87.9988 2.56273 84.6633 2.4926 81.2502ZM6.00117 64.4423C5.99644 66.3302 5.99951 68.2182 5.9852 70.106C5.96285 73.0516 5.72684 75.9688 5.06689 78.8555C4.74778 80.2514 4.56795 81.6988 4.51208 83.1302C4.43659 85.0639 5.10148 85.822 6.98594 86.3075C10.3318 87.1695 13.7343 87.6311 17.1885 87.6457C20.8953 87.6614 24.5475 87.2209 28.1159 86.1804C29.2574 85.8476 30.0444 85.1598 30.1341 83.9269C30.1942 83.1023 30.1994 82.253 30.072 81.4394C29.6477 78.7297 29.154 76.0308 28.6802 73.3289C28.6525 73.1708 28.5657 73.023 28.5064 72.8704C28.4621 72.8822 28.4177 72.894 28.3734 72.9058C28.3734 73.3333 28.3734 73.7609 28.3734 74.2117C21.0097 75.3827 13.6766 75.3816 6.2595 74.1875C6.2595 70.631 6.2595 67.0735 6.2595 63.5161C6.18722 63.5148 6.11494 63.5135 6.04266 63.5122C6.02904 63.7688 6.01542 64.0254 6.00117 64.4423ZM5.91408 61.2796C5.99437 60.8224 6.14295 60.3654 6.14446 59.908C6.16115 54.854 6.15511 49.7999 6.15502 44.7458C6.15483 33.47 6.15524 22.1942 6.15047 10.9184C6.15035 10.6164 6.13478 10.3029 6.0549 10.0146C5.87835 9.37717 5.40629 9.03055 4.76636 9.02739C4.12744 9.02425 3.63941 9.356 3.47692 10.0026C3.38384 10.3729 3.36115 10.7689 3.36066 11.1534C3.34383 24.3701 3.33083 37.5867 3.32407 50.8034C3.32246 53.9355 3.34464 57.0677 3.35639 60.1998C3.35892 60.8754 3.51154 61.5015 4.19332 61.7879C4.80904 62.0466 5.39097 61.9313 5.91408 61.2796ZM31.1262 19.0834C31.1262 17.501 31.1265 15.9187 31.1261 14.3363C31.1258 13.1426 31.1515 11.948 31.115 10.7554C31.0863 9.82031 30.4809 9.19037 29.7153 9.19839C28.9294 9.20662 28.3738 9.83903 28.3346 10.7753C28.3265 10.9693 28.3326 11.1639 28.3326 11.3583C28.3317 18.2686 28.3305 25.1789 28.3302 32.0892C28.3298 41.4284 28.329 50.7675 28.3315 60.1067C28.3318 61.2574 28.8404 61.9149 29.7125 61.9264C30.5797 61.9377 31.103 61.2739 31.1257 60.1309C31.1296 59.9367 31.1266 59.7423 31.1266 59.5479C31.1265 56.1908 31.1264 52.8337 31.1263 49.4766C31.1262 39.4011 31.1262 29.3256 31.1262 19.0834ZM8.78148 5.35692C8.47811 5.38493 8.16932 5.3861 7.87238 5.44601C6.99911 5.62218 6.72609 6.01942 6.80653 6.91518C6.88575 7.7973 7.57549 7.49424 8.01802 7.48025C10.1517 7.41276 12.2843 7.18419 14.4158 7.20137C18.5733 7.23487 22.7296 7.40355 26.8871 7.48232C27.2041 7.48832 27.7474 7.28533 27.803 7.0773C27.9483 6.53332 27.9865 5.88134 27.2675 5.60402C26.987 5.49583 26.6819 5.41506 26.3833 5.396C24.2528 5.25996 22.1205 5.03227 19.9899 5.04479C16.3047 5.06647 12.6203 5.24093 8.78148 5.35692ZM2.77975 65.8317C2.9107 66.0001 3.04164 66.1684 3.17259 66.3367C3.28147 66.1463 3.49991 65.9412 3.47682 65.7684C3.42606 65.3885 3.25323 65.0248 3.13023 64.6546C3.00574 65.003 2.88126 65.3515 2.77975 65.8317ZM31.8868 65.1677C31.7562 64.9987 31.6255 64.8298 31.4949 64.6608C31.3857 64.8512 31.167 65.0561 31.1899 65.229C31.2403 65.6097 31.4128 65.9742 31.5355 66.3453C31.6603 65.9967 31.785 65.6482 31.8868 65.1677Z',
                fillColor: '#e8c70e',
                fillOpacity: 1,
                rotation: curRot,
                scale: 0.5,
                anchor: new google.maps.Point(17, 52),
              }}
              options={{ map: googleMap }}
            />
          )}
        </GoogleMap>
      </LoadScript>
    </div>
  );
}

export default App;
